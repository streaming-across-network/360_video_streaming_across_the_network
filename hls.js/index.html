<!DOCTYPE html>

<html>
  <head>
    <link rel="stylesheet" href="styles.css">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  </head>

  <body>
    <script src="hls.js"></script>
    <script src="likebutton.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <div id="background-container">
      <div class = "container-fluid" id="container1">

        <div class="row" id="row1">
          <div class="title">
            <div class="col">
              <h1>360° Livestream</h1>
              <h2>360° Camera HLS-Livestream Powered by hls.js</h2>   
            </div>        
          </div>
        </div>
        

        <div class="button-and-text" id="row2">
            <button type="button" class="control-button" onclick="openFullscreen(); vid.play();">
              <label>
                <i class="fa-solid fa-play"></i>
              </label>
            </button>  

          <div class="button-text">
            PLAY
          </div>
        </div>


        <div class="button-and-text" id="row3">
          
          <button type="button" class="control-button" onclick= "vid.pause();">
            <label>
              <i class="fa-solid fa-pause"></i>
            </label>
          </i></button>

          <div class="button-text">
            PAUSE
          </div>
        </div>


  
        <div class="likeAndDislike">
          <button  class="like__btn" onclick="likeButtonClicked()">
            <span id="like_icon"><i class="fa-solid fa-thumbs-up"></i></span>
            <span id="like_count"> 10 </span> likes
          </button>
            
          <button  class="dislikebutton" onclick="dislikeButtonClicked()">
            <span id="dislike_icon"><i class="fa-solid fa-thumbs-down"></i></span>
            <span id="dislike_count"> 0 </span> dislikes
          </button>
  
          <div class="share-btn-container" onclick="shareButtonClicked()">
            <a href="#" class="facebook-btn">
              <i class="fab fa-facebook"></i>
            </a>
      
            <a href="#" class="twitter-btn" onclick="shareButtonClicked()">
              <i class="fab fa-twitter"></i>
            </a>
      
            <a href="#" class="whatsapp-btn" onclick="shareButtonClicked()">
              <i class="fab fa-whatsapp"></i>
            </a>
          </div>
        </div>
  
  
  
  
  
        
        
  
        <div class="c-video">
          <video width="0%" id="video"></video></div>
        </div>

      </div>
      
    </div>
      


    <script>

      let IPAddr = prompt("Please enter the IP address of the streaming server");


      var video = document.getElementById('video');
      if (Hls.isSupported()) {
        var hls = new Hls({
          debug: true,
        });
        hls.loadSource('http://'+IPAddr+'/live/livestream.m3u8');
        hls.attachMedia(video);
        hls.on(Hls.Events.MEDIA_ATTACHED, function () {
          video.muted = false;
        });
        }

/* Get the element you want to display in fullscreen */
var elem = document.getElementById("video");

/* Execute the openFullscreen() function to open the video in fullscreen. Include prefixes for browsers that do not support the requestFullscreen property */
function openFullscreen() {
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) { /* Safari */
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { /* IE11 */
    elem.msRequestFullscreen();
  }
}     

var vid = document.getElementById("video");
/*vid.onplaying = function() {
    openFullscreen();
};

*/
function playVid() {
    vid.play();
}

function pauseVid() {
    vid.pause();
}

</script>

<!--
<h2>Fullscreen with JavaScript</h2>
<p>Click on the button to open the video in fullscreen mode.</p>
<button onclick="openFullscreen(); vid.play(); ">Open Video in Fullscreen Mode</button>
<p><strong>Tip:</strong> Press the "Esc" key to exit full screen.</p>
-->

  </body>
</html>